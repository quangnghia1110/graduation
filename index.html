<!doctype html>
<html data-n-head-ssr dir="ltr" lang="vi">
<head>
    <title>Lễ Tốt Nghiệp - LÊ PHƯƠNG HÀ</title>
    <meta data-n-head="ssr" charset="utf-8">
    <meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1">
    <meta data-n-head="ssr" data-hid="robots" name="robots" content="noindex,nofollow">
    <meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Lễ Tốt Nghiệp">
    <meta data-n-head="ssr" data-hid="description" property="og:description" content="Thân mời bạn dự lễ tốt nghiệp">
    <meta data-n-head="ssr" data-hid="og:description" property="og:description" content="Thân mời bạn dự lễ tốt nghiệp">
    <link data-n-head="ssr" rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter&amp;wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap">
    <link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora&amp;display=swap">
    <link data-n-head="ssr" rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link data-n-head="ssr" rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    <link data-n-head="ssr" rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link data-n-head="ssr" href="https://fonts.googleapis.com/css2?family=Meow+Script&amp;display=swap"
        rel="stylesheet">
    <link data-n-head="ssr"
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&amp;display=swap"
        rel="stylesheet">
    <script type="text/javascript" async=""
        src="https://www.googletagmanager.com/gtag/js?id=G-N1GKL21Y54&amp;l=dataLayer&amp;cx=c"></script>
    <script async="" src="https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js"></script>
    <script type="text/javascript" async="" src="https://www.googleadservices.com/pagead/conversion_async.js"></script>
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-KX29S7T"></script>
    <script data-n-head="ssr" data-hid="gtm-script">window['dataLayer'] = []; if (!window._gtm_init) { window._gtm_init = 1; (function (w, n, d, m, e, p) { w[d] = (w[d] == 1 || n[d] == 'yes' || n[d] == 1 || n[m] == 1 || (w[e] && w[e][p] && w[e][p]())) ? 1 : 0 })(window, navigator, 'doNotTrack', 'msDoNotTrack', 'external', 'msTrackingProtectionEnabled'); (function (w, d, s, l, x, y) { w[x] = {}; w._gtm_inject = function (i) { if (w.doNotTrack || w[x][i]) return; w[x][i] = 1; w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s); j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i; f.parentNode.insertBefore(j, f); } })(window, document, 'script', 'dataLayer', '_gtm_ids', '_gtm_inject') };["GTM-KX29S7T"].forEach(function (i) { window._gtm_inject(i) })</script>
    <link rel="stylesheet" href="./css/style1.css">
    <link rel="stylesheet" href="./css/style2.css">
    <link rel="stylesheet" href="./css/style3.css">
    <link rel="stylesheet" href="./css/style4.css">
    <link rel="stylesheet" href="./css/style5.css">
    <link rel="stylesheet" href="./css/style6.css">
    <link rel="stylesheet" href="./css/style7.css">
    <link rel="stylesheet" href="./css/style8.css">
    <link rel="stylesheet" href="./css/style9.css">
    <link rel="stylesheet" href="./css/namtay.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/styles10.css">
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet">
    </link>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            const name = urlParams.get('name');
            if (!id || !name) {
                document.body.innerHTML = `
                    <div style="text-align: center; margin-top: 50px;">
                        <h2>Lỗi: Thông tin không hợp lệ</h2>
                        <p>ID hoặc tên người dùng không tồn tại hoặc không hợp lệ.</p>
                        <button onclick="window.location.href='index.html'">Quay lại trang chủ</button>
                    </div>
                `;
                return;
            }
            const guestName = urlParams.get('name');
            if (guestName) {
                function updateGuestName() {
                    console.log("Đang cập nhật tên khách:", guestName);
                    const invitationElement = document.getElementById('invitation') || 
                                             document.querySelector('.guest_name') ||
                                             document.querySelector('[data-id="invitation"]');
                    if (invitationElement) {
                        invitationElement.textContent = decodeURIComponent(guestName);
                        invitationElement.style.display = 'block';
                        console.log("Đã cập nhật tên khách thành công");
                    } else {
                        console.log("Không tìm thấy element 'invitation' - thử lại sau 500ms");
                        setTimeout(updateGuestName, 500);
                    }
                }
                updateGuestName();
                window.addEventListener('load', updateGuestName);
            }
        });
    </script>
</head>
<body style="pointerEvents: none;">
    <div id="section-popup-qr"></div>
    <div id="section-loading"></div>
    <div id="section-banner"></div>
    <div id="section-location"></div>
    <div id="section-bio"></div>
    <div id="section-journey"></div>
    <div id="section-gallery"></div>
    <div id="section-event"></div>
    <div id="section-footer"></div>
    <div id="section-donate-button"></div>
    <div class="no-fb-chat" data-n-head="%7B%22class%22:%7B%22ssr%22:%5B%22no-fb-chat%22%5D%7D%7D">
        <div id="__nuxt">
            <div id="__layout">
                <div class="ws">
                    <div class="pageMain">
                        <div class="t8">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/protonet-jquery.inview/1.1.2/jquery.inview.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                await loadSection('section-popup-qr', 'sections/popup-qr.html');
                await loadSection('section-loading', 'sections/loading.html');
                await loadSection('section-banner', 'sections/banner.html');
                await loadSection('section-location', 'sections/location.html');
                await loadSection('section-bio', 'sections/bio.html');
                await loadSection('section-journey', 'sections/journey.html');
                await loadSection('section-gallery', 'sections/gallery.html');
                await loadSection('section-event', 'sections/event.html');
                await loadSection('section-footer', 'sections/footer.html');
                await loadSection('section-donate-button', 'sections/donate-button.html');

                initializeSplide();
            } catch (error) {
                console.error('Error loading sections:', error);
            }
        });

        function loadSection(sectionId, filePath) {
            return new Promise((resolve, reject) => {
                fetch(filePath)
                    .then(response => response.text())
                    .then(html => {
                        const element = document.getElementById(sectionId);
                        if (element) {
                            element.innerHTML = html;
                            resolve();
                        } else {
                            reject(new Error(`Element with id ${sectionId} not found`));
                        }
                    })
                    .catch(error => {
                        console.error(`Error loading section ${sectionId}:`, error);
                        reject(error);
                    });
            });
        }

        function initializeSplide() {
            try {
                if (document.querySelector('.splide')) {
                    new Splide('.splide', {
                        type: 'loop',
                        perPage: 3,
                        focus: 'center',
                        autoplay: true,
                        interval: 3000,
                        flickMaxPages: 3,
                        updateOnMove: true,
                        pagination: false,
                        padding: '10%',
                        throttle: 300,
                        breakpoints: {
                            1440: {
                                perPage: 2,
                                padding: '30%'
                            },
                            1024: {
                                perPage: 2,
                                padding: '20%'
                            },
                            767: {
                                perPage: 1,
                                padding: '20%'
                            },
                            640: {
                                perPage: 1,
                                padding: '10%'
                            }
                        }
                    }).mount();
                }
            } catch (error) {
                console.error('Error initializing Splide:', error);
            }
        }

        var splide = null;
        var isthamdu = true;
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(function() {
                splide = new Splide('.splide', {
                    type: 'slide',
                    perPage: 1,
                    perMove: 1,
                    start: 1
                });
                splide.mount();
                initializeScripts();
            }, 1000); 
        });
        function initializeScripts() {
            var countDownDate = new Date("Jun 1, 2025 10:30:00").getTime();
            var x = setInterval(function () {
                var now = new Date().getTime();
                var distance = countDownDate - now;
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                if (document.getElementById("countday")) {
                    document.getElementById("countday").innerHTML = days;
                    document.getElementById("counthour").innerHTML = hours;
                    document.getElementById("countmin").innerHTML = minutes;
                    document.getElementById("countsecond").innerHTML = seconds;
                }
                if (distance < 0) {
                    clearInterval(x);
                    if (document.getElementById("countday")) {
                        document.getElementById("countday").innerHTML = 0;
                        document.getElementById("counthour").innerHTML = 0;
                        document.getElementById("countmin").innerHTML = 0;
                        document.getElementById("countsecond").innerHTML = 0;
                    }
                }
            }, 1000);
            setTimeout(() => {
                if (document.querySelector('.pageMain')) {
                    document.querySelector('.pageMain').style.display = 'block';
                    document.querySelector('.pageMain').style.overflow = 'auto';
                }
                if (document.getElementById('loading')) {
                    document.getElementById('loading').remove();
                }
                document.body.style.pointerEvents = 'auto';
                if (document.querySelector('#input_name')) {
                    document.querySelector('#input_name').addEventListener('input', () => {
                        document.getElementById('sendDataSubmit').classList.remove("inactive");
                    });
                }
                window.addEventListener("scroll", reveal);
                reveal();
            }, 1888);
        }
        function closePopup(event) {
            if (event != null && event.target.localName != 'div') {
                return;
            }
            enableScroll();
            document.querySelector('#dialog-previewImage').style.display = 'none';
        }
        function openPopup(index) {
            let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            let arr1 = arr.splice(index, 12 - index);
            let arr2 = arr1.concat(arr);
            if (splide) {
            splide.go(`-1`);
            let listSlide = document.querySelectorAll('.listIMG');
            listSlide.forEach(function (item, i) {
                    item.src = `./assets/img/theme/lephuongha/lephuongha${arr2[i]}.jpg`;
            });
            document.querySelector('#dialog-previewImage').style.display = 'flex';
            disableScroll();
            }
        }
        function clickoption(value) {
            isthamdu = (value == 1);
            document.querySelector(`#count`).style.display = (value == 1) ? 'block' : 'none';
            document.querySelector(`#phuongtien`).style.display = (value == 1) ? 'block' : 'none';
            document.querySelector(`#option${value}`).classList.add('checked');
            document.querySelector(`#option${value == 2 ? 1 : 2}`).classList.remove('checked');
        }
        function sendData() {
            document.getElementById('loading2').style.display = 'flex';
            document.body.style.pointerEvents = 'none';
            disableScroll();
            let name = document.querySelector('#input_name').value;
            if (!name || name.trim() === '') {
                alert('Vui lòng nhập tên của bạn!');
                document.getElementById('loading2').style.display = 'none';
                document.body.style.pointerEvents = 'auto';
                enableScroll();
                return;
            }
            let songuoi = parseInt(document.querySelector('#id_field_sl').value);
            let phuongtien = parseInt(document.querySelector('#id_field_pt').value);
            let url = `https://script.google.com/macros/s/AKfycbwTqErwj6kw6itpByj9RPBCx2yn0vOOS8PBhpRRRZwy0zwEuL9GLZTztURTt9FG0Hc/exec?`;
            if (isthamdu) {
                url += `name_km=${encodeURIComponent(name)}&tham_gia=X&count=${songuoi}&phuong_tien=${encodeURIComponent(phuongtien == 1 ? 'X' : 'O')}&time_send=${encodeURIComponent((new Date()).toString())}`;
            } else {
                url += `name_km=${encodeURIComponent(name)}&tham_gia=O&time_send=${encodeURIComponent((new Date()).toString())}`;
            }
            fetch(url)
                .then(function (response) {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response;
                })
                .then(function () {
                    document.getElementById('loading2').style.display = 'none';
                    document.body.style.pointerEvents = 'auto';
                    enableScroll();
                    alert('Cảm ơn bạn đã phản hồi! Thông tin đã được lưu.');
                    document.querySelector('#input_name').value = '';
                    document.getElementById('sendDataSubmit').classList.add("inactive");
                })
                .catch(function (error) {
                    console.error('Error submitting form:', error);
                    document.getElementById('loading2').style.display = 'none';
                    document.body.style.pointerEvents = 'auto';
                    enableScroll();
                    alert('Có lỗi xảy ra khi gửi thông tin. Vui lòng thử lại sau!');
                });
        }
        function reveal() {
            var reveals = document.querySelectorAll(".revealAnimation");
            for (var i = 0; i < reveals.length; i++) {
                var windowHeight = window.innerHeight;
                var elementTop = reveals[i].getBoundingClientRect().top;
                var elementVisible = 120;
                if (elementTop < windowHeight - elementVisible) {
                    reveals[i].classList.add("active-Animation");
                } else {
                    reveals[i].classList.remove("active-Animation");
                }
            }
        }
        function onReady(callback) {
            var intervalId = window.setInterval(function () {
                if (document.getElementsByTagName('body')[0] !== undefined) {
                    window.clearInterval(intervalId);
                    callback.call(this);
            }
        }, 1000);
        }
        function showDialogDonate() {
            if (document.querySelector(`#popupQR`)) {
            document.querySelector(`#popupQR`).style.display = 'flex';
            disableScroll();
            document.body.style.pointerEvents = 'none';
            }
        }
        function hideDialogDonate() {
            if (document.querySelector(`#popupQR`)) {
            document.querySelector(`#popupQR`).style.display = 'none';
            enableScroll();
            document.body.style.pointerEvents = 'auto';
        }
        }
        function disableScroll() {
            document.body.style.overflowY = 'hidden';
            document.querySelector(`html`).style.overflowY = 'hidden';
            document.body.addEventListener('touchmove', preventDefault, { passive: false });
        }
        function enableScroll() {
            document.body.style.overflowY = 'auto';
            document.querySelector(`html`).style.overflowY = 'auto';
            document.body.removeEventListener('touchmove', preventDefault);
        }
        function preventDefault(e) {
            e.preventDefault();
        }
        window.onload = async function() {
            const urlParams = new URLSearchParams(window.location.search);
            const invitationId = urlParams.get('id');
            if (invitationId) {
                try {
                    const url = `https://script.google.com/macros/s/AKfycbwTqErwj6kw6itpByj9RPBCx2yn0vOOS8PBhpRRRZwy0zwEuL9GLZTztURTt9FG0Hc/exec?action=getInvitation&id=${invitationId}`;
                    const response = await fetch(url);
                    const data = await response.json();
                    if (data && data.name) {
                        const elements = document.getElementsByTagName('*');
                        for (let element of elements) {
                            if (element.childNodes.length > 0) {
                                for (let node of element.childNodes) {
                                    if (node.nodeType === 3) {
                                        const text = node.nodeValue;
                                        if (text.includes('{{guest_name}}')) {
                                            node.nodeValue = text.replace('{{guest_name}}', data.name);
                                        }
                                    }
                                }
                            }
                        }
                        document.querySelectorAll('[data-id="invitation"]').forEach(element => {
                            element.textContent = data.name;
                            element.style.display = 'block';
                        });
                    }
                } catch (error) {
                    console.error('Error fetching invitation:', error);
                }
            }
        }
    </script>
</body>
</html>