<section data-widget="location" class="t8-link" style="background-color: #fff; padding: 20px; text-align: center;">
    <div class="location-container" style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap;">
        <!-- Left Image -->
        <div class="location-image" style="flex: 0 0 250px;">
            <img src="./assets/img/theme/lephuongha/lephuongha22.jpg" alt="" 
                style="width: 100%; height: 350px; object-fit: cover; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
        </div>

        <!-- Center Content -->
        <div class="location-content" style="flex: 1 1 500px; min-width: 300px; max-width: 600px;">
            <div class="t8-location-top" style="margin-bottom: 20px;">
                <h1 style="color: #002366; font-size: 36px;">Tr√¢n tr·ªçng k√≠nh m·ªùi</h1>
                <div data-id="invitation" id="invitation" class="guest_name" style="font-size: 60px; color: #ff0000; margin: 15px 0; font-family: 'Meow Script', cursive;">NG√î QUANG NGH</div>
            </div>
            
            <div class="t8-location-mid" style="background: #f9f9f9; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <div style="width: 40px; height: 40px; background-color: #f9e8ea; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        üìÖ
                    </div>
                    <p style="font-size: 20px; color: #ff0000; font-weight: bold; margin: 0;">01.06 - 10:30 AM</p>
                </div>
                <p style="font-size: 18px; color: #333; margin-top: 10px;">H·ªôi tr∆∞·ªùng A, Tr∆∞·ªùng ƒê·∫°i h·ªçc HUFLIT</p>
                <p style="font-size: 18px; color: #333;">155 S∆∞ V·∫°n H·∫°nh, Ph∆∞·ªùng 13, Qu·∫≠n 10, TP. H·ªì Ch√≠ Minh</p>
                <a data-block-node="url" href="https://maps.app.goo.gl/UuBuCWnk28mgJQa47" target="_blank" style="color: #002366; font-weight: bold; text-decoration: none;">Xem b·∫£n ƒë·ªì</a>
            </div>
            
            <p style="font-style: italic; color: #002366; font-size: 20px; margin-top: 30px;">S·ª± hi·ªán di·ªán c·ªßa b·∫°n l√† ni·ªÅm vinh h·∫°nh c·ªßa t√¥i!</p>
            
            <div class="contact-section" style="margin-top: 40px;">
                <h2 style="color: #002366; font-size: 24px; margin-bottom: 20px;">Th√¥ng tin li√™n h·ªá</h2>
                <div style="display: flex; justify-content: center; gap: 50px; flex-wrap: wrap;">
                    <a href="tel:0974117373" style="text-decoration: none; color: inherit;">
                        <div class="contact-item" style="text-align: center;">
                            <div style="width: 50px; height: 50px; background-color: #f9e8ea; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                üìû
                            </div>
                            <p style="color: #002366; font-weight: 600;">ƒêi·ªán tho·∫°i</p>
                            <span style="color: #333;">097 411 7373</span>
                        </div>
                    </a>
                    <a href="mailto:lephuongha@gmail.com" style="text-decoration: none; color: inherit;">
                        <div class="contact-item" style="text-align: center;">
                            <div style="width: 50px; height: 50px; background-color: #f9e8ea; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                üìß
                            </div>
                            <p style="color: #002366; font-weight: 600;">Email</p>
                            <span style="color: #333;">lephuongha@gmail.com</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <div class="location-image" style="flex: 0 0 250px;">
            <img src="./assets/img/theme/lephuongha/lephuongha23.jpg" alt="" 
                style="width: 100%; height: 350px; object-fit: cover; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
        </div>
    </div>
</section>

<style>
.location-image img {
    transition: transform 0.5s ease;
}

.location-image img:hover {
    transform: scale(1.05);
}

@media (max-width: 1200px) {
    .location-container {
        padding: 0 20px;
    }
    
    .location-image {
        flex: 0 0 200px !important;
    }
    
    .location-image img {
        height: 280px !important;
    }
}

@media (max-width: 768px) {
    .location-image {
        flex: 0 0 150px !important;
    }
    
    .location-image img {
        height: 210px !important;
    }
}

@media (max-width: 480px) {
    .location-container {
        flex-direction: row;
        justify-content: center;
        gap: 10px;
    }
    
    .location-image {
        flex: 0 0 45% !important;
    }
    
    .location-image img {
        height: 180px !important;
    }
    
    .location-content {
        order: -1;
    }
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // L·∫•y tham s·ªë t·ª´ URL
        const urlParams = new URLSearchParams(window.location.search);
        const guestId = urlParams.get('id');
        const guestName = urlParams.get('name');
        
        // L·∫•y element hi·ªÉn th·ªã t√™n
        const invitationElement = document.getElementById('invitation');
        
        if (!invitationElement) {
            console.error("Kh√¥ng t√¨m th·∫•y element invitation");
            return;
        }

        // C·∫≠p nh·∫≠t t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ data-id="invitation"
        function updateAllInvitationElements(name) {
            document.querySelectorAll('[data-id="invitation"]').forEach(element => {
                element.textContent = name;
                element.style.display = 'block'; // ƒê·∫£m b·∫£o element hi·ªÉn th·ªã
            });
        }

        // N·∫øu c√≥ name trong URL th√¨ hi·ªÉn th·ªã lu√¥n
        if (guestName) {
            try {
                const decodedName = decodeURIComponent(guestName);
                updateAllInvitationElements(decodedName);
                console.log("ƒê√£ hi·ªÉn th·ªã t√™n t·ª´ URL:", decodedName);
                return; // Tho√°t n·∫øu ƒë√£ hi·ªÉn th·ªã ƒë∆∞·ª£c t√™n
            } catch (error) {
                console.error("L·ªói khi decode t√™n:", error);
            }
        }

        // N·∫øu kh√¥ng c√≥ name ho·∫∑c c√≥ l·ªói, th·ª≠ l·∫•y t·ª´ API
        if (guestId) {
            const url = `https://script.google.com/macros/s/AKfycbwTqErwj6kw6itpByj9RPBCx2yn0vOOS8PBhpRRRZwy0zwEuL9GLZTztURTt9FG0Hc/exec?action=getInvitation&id=${guestId}`;
            
            fetch(url)
                .then(response => {
                    console.log("Raw response:", response); // Debug log
                    return response.text(); // ƒê·ªçc response d∆∞·ªõi d·∫°ng text tr∆∞·ªõc
                })
                .then(text => {
                    console.log("Raw text:", text); // Debug log
                    const data = JSON.parse(text);
                    console.log("Parsed data:", data); // Debug log
                    
                    if (data && data.result === 'success' && data.name) {
                        updateAllInvitationElements(data.name);
                        console.log("ƒê√£ hi·ªÉn th·ªã t√™n t·ª´ API:", data.name);
                    } else {
                        updateAllInvitationElements("Qu√Ω kh√°ch");
                        console.log("Kh√¥ng t√¨m th·∫•y t√™n trong API:", data);
                    }
                })
                .catch(error => {
                    console.error("L·ªói khi g·ªçi API:", error);
                    updateAllInvitationElements("Qu√Ω kh√°ch");
                });
        } else {
            updateAllInvitationElements("Qu√Ω kh√°ch");
            console.log("Kh√¥ng c√≥ ID trong URL");
        }
    });
</script>